<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.75">
<link rel="alternate" type="application/rss+xml" href="/PyMarlin/blog/rss.xml" title="PyMarlin Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/PyMarlin/blog/atom.xml" title="PyMarlin Blog Atom Feed"><title data-react-helmet="true">Data interface single and multi process | PyMarlin</title><meta data-react-helmet="true" property="og:url" content="https://github.com/microsoft/PyMarlin/PyMarlin/docs/examples/datamodule-example"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Data interface single and multi process | PyMarlin"><meta data-react-helmet="true" name="description" content="This is an example explaining how to leverage the in-built multiprocessing capability of DataInterface for large amounts of data."><meta data-react-helmet="true" property="og:description" content="This is an example explaining how to leverage the in-built multiprocessing capability of DataInterface for large amounts of data."><link data-react-helmet="true" rel="shortcut icon" href="/PyMarlin/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://github.com/microsoft/PyMarlin/PyMarlin/docs/examples/datamodule-example"><link data-react-helmet="true" rel="alternate" href="https://github.com/microsoft/PyMarlin/PyMarlin/docs/examples/datamodule-example" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://github.com/microsoft/PyMarlin/PyMarlin/docs/examples/datamodule-example" hreflang="x-default"><link rel="stylesheet" href="/PyMarlin/assets/css/styles.4339f032.css">
<link rel="preload" href="/PyMarlin/assets/js/runtime~main.ab9f2723.js" as="script">
<link rel="preload" href="/PyMarlin/assets/js/main.412c625a.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/PyMarlin/"><img src="/PyMarlin/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/PyMarlin/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">PyMarlin</strong></a><a class="navbar__item navbar__link navbar__link--active" href="/PyMarlin/docs/getting-started">Docs</a><a class="navbar__item navbar__link" href="/PyMarlin/docs/reference/core/module_interface">SDK</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/microsoft/PyMarlin" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/PyMarlin/"><img src="/PyMarlin/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/PyMarlin/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">PyMarlin</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/PyMarlin/docs/getting-started">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/PyMarlin/docs/reference/core/module_interface">SDK</a></li><li class="menu__list-item"><a href="https://github.com/microsoft/PyMarlin" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/PyMarlin/docs/getting-started">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" href="/PyMarlin/docs/installation">Installation</a></li><li class="menu__list-item"><a class="menu__link" href="/PyMarlin/docs/marlin-in-pictures">PyMarlin in Pictures</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Examples</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/PyMarlin/docs/examples/azureml">Azure ML</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/PyMarlin/docs/examples/bart">Bart Summarization</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/PyMarlin/docs/examples/cifar">CIFAR image classification</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/PyMarlin/docs/examples/datamodule-example">Data interface single and multi process</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/PyMarlin/docs/examples/distillation">Distillation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/PyMarlin/docs/examples/glue-tasks">Glue Tasks</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Plugins</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/PyMarlin/docs/plugins/hf_ner">Named Entity Recognition with HuggingFace models</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/PyMarlin/docs/plugins/hf_seq_classification">Text Sequence Classification with Huggingface models</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/PyMarlin/docs/utils/stats">Stats and tensorboard</a></li><li class="menu__list-item"><a class="menu__link" href="/PyMarlin/docs/credits">Feedback &amp; Credits</a></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Data interface single and multi process</h1></header><div class="markdown"><p>This is an example explaining how to leverage the in-built multiprocessing capability of DataInterface for large amounts of data.
For example purpose we are using 27 files from wikipedia raw text.
1) Azure virtual machine , single node multi-process , single selective machine
2) AML, single node vs multi-node, single selective machine</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="configs---yaml-and-parsing"></a>Configs - YAML and Parsing<a class="hash-link" href="#configs---yaml-and-parsing" title="Direct link to heading">#</a></h2><p>For ease of use we have configs passed in as YAML files.
In this case we use the config file : config_prod.yaml included with example code.</p><p>Snippet of config: ( modify file paths according to your folder structure)</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly python"><div tabindex="0" class="prism-code language-python codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">input_dir</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;C:/Users/ashwinsr/wikipedia.part1&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">out_dir</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;C:/Users/ashwinsr/out_fold&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">process_count</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">run_type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;&#x27;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>This config can be read in like below : </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly python"><div tabindex="0" class="prism-code language-python codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#Create arg parser and read config</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">parser </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> CustomArgParser</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">log_level</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;DEBUG&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> default_yamlfile</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;config_prod.yaml&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">config </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> parser</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">parse</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Our data processor is a simple token splitter which given raw text will split it into token store the results back in a file. The processor runs 1 file at a time.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="virtual-machine"></a>Virtual machine<a class="hash-link" href="#virtual-machine" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="single-virtual-machine-with-multi-process"></a>Single virtual machine with multi process<a class="hash-link" href="#single-virtual-machine-with-multi-process" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly python"><div tabindex="0" class="prism-code language-python codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">dataInterface </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> Ex_dataInterface</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">file_list </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> dataInterface</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">get_file_names</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;input_dir&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#create and run processor1</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">example_processor </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> Processor1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;input_dir&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;out_dir&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">out </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> example_processor</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">multi_process_data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">file_list</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> process_count</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;process_count&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Here we create a list of files in the directory and initialize the processor with the input and output directory. We call the the multi_process_data function in the processor, passing the list of files , with the process count. The processor then spins up those many number of processes to create coressponding output. </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="selective-node-preprocessing"></a>Selective node preprocessing<a class="hash-link" href="#selective-node-preprocessing" title="Direct link to heading">#</a></h3><p>For a case where we have a single node but want to process the data in batches. We want the processor to run on different subset of files depending upon the rank we assign. This is to emulate multi-node behaviour with a single node by controlling the node rank parameter.</p><p>For instance if we have 30 files to process over 5 separate runs , then we need to add the following to config and initialize dataProcessor accordingly</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly python"><div tabindex="0" class="prism-code language-python codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">distribArgs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    local_rank</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">  </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    global_rank</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">  </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    world_size</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">  </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    node_count</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">  </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    local_size</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">  </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    node_rank</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly python"><div tabindex="0" class="prism-code language-python codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">distrib </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> DistributedPreprocessArguments</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">**</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;distribArgs&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">example_processorer </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> Processor1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;input_dir&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;out_dir&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> distrib</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Remember to initialize the base dataProcessor class with the distributed arguemnts as shown below, the default None would treat it like a regular multi-node processing job</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">class Processor1(data_interface.DataProcessor):</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    def __init__(self, input_dir, out_dir, distrib_args = None):</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        super(Processor1, self).__init__(distrib_args)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        self.input_dir = input_dir</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        self.out_dir = out_dir</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>With the above setting we would process files 18-24 out of 30. Since the node_rank is 3 (0 indexed) and can be a maximum of 4. node_count gives us a count of total nodes available
This gives a flexibility with large data processing with limited compute.</p><p>To run in virtual machine copy over the files to virtual machine using SCP
Install pymarlin and requirements and run example</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly python"><div tabindex="0" class="prism-code language-python codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> ssh $user@$machine </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">p $port</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    $ pip install  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">pymarlin </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">force</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">reinstall</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    $ pip install </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">r pymarlin</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">requirements</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">txt</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    $ cd data_ex</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    $ python data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">py</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="aml"></a>AML<a class="hash-link" href="#aml" title="Direct link to heading">#</a></h3><p>We can do single and multi-node processing both with AML. The datamodule handles AML ranking internally for both single and multinodes to appropriately divide the files across nodes.
You will find a notebook along with the example to submit a AML a job, with placeholders for storage and compute accounts.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/microsoft/PyMarlin/edit/master/website/docs/examples/datamodule-example.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/PyMarlin/docs/examples/cifar"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« CIFAR image classification</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/PyMarlin/docs/examples/distillation"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Distillation Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#configs---yaml-and-parsing" class="table-of-contents__link">Configs - YAML and Parsing</a></li><li><a href="#virtual-machine" class="table-of-contents__link">Virtual machine</a><ul><li><a href="#single-virtual-machine-with-multi-process" class="table-of-contents__link">Single virtual machine with multi process</a></li><li><a href="#selective-node-preprocessing" class="table-of-contents__link">Selective node preprocessing</a></li><li><a href="#aml" class="table-of-contents__link">AML</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/PyMarlin/docs/getting-started">Getting Started</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/pymarlin" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/microsoft/PyMarlin" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Microsoft Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/PyMarlin/assets/js/runtime~main.ab9f2723.js"></script>
<script src="/PyMarlin/assets/js/main.412c625a.js"></script>
</body>
</html>