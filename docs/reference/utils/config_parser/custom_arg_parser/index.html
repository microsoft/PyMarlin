<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.75">
<link rel="alternate" type="application/rss+xml" href="/PyMarlin/blog/rss.xml" title="PyMarlin Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/PyMarlin/blog/atom.xml" title="PyMarlin Blog Atom Feed"><title data-react-helmet="true">utils.config_parser.custom_arg_parser | PyMarlin</title><meta data-react-helmet="true" property="og:url" content="https://github.com/microsoft/PyMarlin/PyMarlin/docs/reference/utils/config_parser/custom_arg_parser"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="utils.config_parser.custom_arg_parser | PyMarlin"><meta data-react-helmet="true" name="description" content="Custom Arguments Parser"><meta data-react-helmet="true" property="og:description" content="Custom Arguments Parser"><link data-react-helmet="true" rel="shortcut icon" href="/PyMarlin/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://github.com/microsoft/PyMarlin/PyMarlin/docs/reference/utils/config_parser/custom_arg_parser"><link data-react-helmet="true" rel="alternate" href="https://github.com/microsoft/PyMarlin/PyMarlin/docs/reference/utils/config_parser/custom_arg_parser" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://github.com/microsoft/PyMarlin/PyMarlin/docs/reference/utils/config_parser/custom_arg_parser" hreflang="x-default"><link rel="stylesheet" href="/PyMarlin/assets/css/styles.4339f032.css">
<link rel="preload" href="/PyMarlin/assets/js/runtime~main.818683f0.js" as="script">
<link rel="preload" href="/PyMarlin/assets/js/main.14617061.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/PyMarlin/"><img src="/PyMarlin/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/PyMarlin/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">PyMarlin</strong></a><a class="navbar__item navbar__link" href="/PyMarlin/docs/getting-started">Docs</a><a class="navbar__item navbar__link navbar__link--active" href="/PyMarlin/docs/reference/core/module_interface">SDK</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/microsoft/PyMarlin" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/PyMarlin/"><img src="/PyMarlin/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/PyMarlin/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">PyMarlin</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/PyMarlin/docs/getting-started">Docs</a></li><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/PyMarlin/docs/reference/core/module_interface">SDK</a></li><li class="menu__list-item"><a href="https://github.com/microsoft/PyMarlin" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Reference</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">core</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/PyMarlin/docs/reference/core/data_interface">data_interface</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/PyMarlin/docs/reference/core/module_interface">module_interface</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/PyMarlin/docs/reference/core/trainer">trainer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/PyMarlin/docs/reference/core/trainer_backend">trainer_backend</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">plugins</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">plugins.hf_ner</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/PyMarlin/docs/reference/plugins/hf_ner/data_classes">data_classes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/PyMarlin/docs/reference/plugins/hf_ner/implementation">implementation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/PyMarlin/docs/reference/plugins/hf_ner/module_classes">module_classes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/PyMarlin/docs/reference/plugins/hf_ner/sequence_labelling_metrics">sequence_labelling_metrics</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">plugins.hf_seq2seq</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/PyMarlin/docs/reference/plugins/hf_seq2seq/data_classes">data_classes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/PyMarlin/docs/reference/plugins/hf_seq2seq/implementation">implementation</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">plugins.hf_seq_classification</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/PyMarlin/docs/reference/plugins/hf_seq_classification/data_classes">data_classes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/PyMarlin/docs/reference/plugins/hf_seq_classification/implementation">implementation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/PyMarlin/docs/reference/plugins/hf_seq_classification/module_classes">module_classes</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/PyMarlin/docs/reference/plugins/base">base</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/PyMarlin/docs/reference/plugins/plugin_module_interface">plugin_module_interface</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">utils</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">utils.checkpointer</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/PyMarlin/docs/reference/utils/checkpointer/checkpoint_utils">checkpoint_utils</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">utils.config_parser</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/PyMarlin/docs/reference/utils/config_parser/custom_arg_parser">custom_arg_parser</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">utils.logger</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/PyMarlin/docs/reference/utils/logger/logging_utils">logging_utils</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">utils.misc</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/PyMarlin/docs/reference/utils/misc/misc_utils">misc_utils</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">utils.stats</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/PyMarlin/docs/reference/utils/stats/basic_stats">basic_stats</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">utils.writer</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/PyMarlin/docs/reference/utils/writer/__init__">writer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/PyMarlin/docs/reference/utils/writer/aml">aml</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/PyMarlin/docs/reference/utils/writer/base">base</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/PyMarlin/docs/reference/utils/writer/stdout">stdout</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/PyMarlin/docs/reference/utils/writer/tensorboard">tensorboard</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/PyMarlin/docs/reference/utils/distributed">distributed</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/PyMarlin/docs/reference/utils/fabrics">fabrics</a></li></ul></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">utils.config_parser.custom_arg_parser</h1></header><div class="markdown"><p>Custom Arguments Parser</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="customargparser-objects"></a>CustomArgParser Objects<a class="hash-link" href="#customargparser-objects" title="Direct link to heading">#</a></h2><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly python"><div tabindex="0" class="prism-code language-python codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">CustomArgParser</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>This class is part of utils and is provided to load arguments from the provided YAML config file.
Further, the default values of arguments from config file can be overridden via commandline or via
the special argument --params provided for easy AML experimentation. The class instance takes in the
parser object and optional log_level. This class needs to be instantiated in the main method inside
the Marlin_Scenario code.</p><p>Example for instantiation::</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">parser = CustomArgParser()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">config = parser.parse()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>The command line arguments to override default YAML config values are passed by adding a &#x27;.&#x27; between
namespace and the specific argument as shown in example below. If no namespace is present, then just
pass the argument name. All command line arguments are optional and need to be prefixed with &#x27;--&#x27;.
All commandline arguments not present in YAML config file will be ignored with a warning message.
Example commandline override::</p><p>python train.py --tmgr.epochs 4 --chkp.save_dir &quot;tmp\checkpoints&quot;</p><p>NOTE:
Supported types for CustomArgParser are int, float, str, lists. null is inferred implicitly as str.
If you intend to use other types, then please set a dummy default value in YAML file and pass the
intended value from commandline. Suggested defaults::</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">str: null</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">int: -1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">float: -1.0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">bool: pick either True or False</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">list[int]: [-1, -1, -1]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">list[float] : [-1.0, -1.0, -1.0]</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>To make it easy to use with AML pipelines, the parser treats --params as a special argument. The parser
treats this as a str format of JSON serialized dictionary and parses this single argument to override
the default values from YAML config file of all the arguments present in the dictionary. For example when
user provides this str for --param::</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">&amp;#x27;{&amp;quot;--test.test_str&amp;quot;:&amp;quot;this is a new test string 2&amp;quot;,&amp;quot;--test.test_false&amp;quot;:&amp;quot;false&amp;quot;}&amp;#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NOTE use of single quote and double quotes and use the same format to avoid parsing errors.</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>The parser parses this and overrides the default values provided for test_str and test_false under test
section in the YAML config file.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parse"></a>parse<a class="hash-link" href="#parse" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly python"><div tabindex="0" class="prism-code language-python codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> parse</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> Dict</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Parse YAML config file, parse commandline arguments and merge the two
to get the final merged config dictionary.</p><p>Find and return the path of the file with greatest number of
completed epochs under dirpath (recursive search) for a given file
prefix, and optionally file extension.</p><p><strong>Arguments</strong>:</p><p>  self</p><p><strong>Returns</strong>:</p><ul><li><code>self._config</code> <em>Dict</em> - merged config dictionary containing all arguments.</li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/microsoft/PyMarlin/edit/master/website/docs/reference/utils/config_parser/custom_arg_parser.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/PyMarlin/docs/reference/utils/checkpointer/checkpoint_utils"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« utils.checkpointer.checkpoint_utils</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/PyMarlin/docs/reference/utils/logger/logging_utils"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">utils.logger.logging_utils Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#customargparser-objects" class="table-of-contents__link">CustomArgParser Objects</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/PyMarlin/docs/getting-started">Getting Started</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/pymarlin" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/microsoft/PyMarlin" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Microsoft Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/PyMarlin/assets/js/runtime~main.818683f0.js"></script>
<script src="/PyMarlin/assets/js/main.14617061.js"></script>
</body>
</html>