(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[6185],{3905:function(e,t,r){"use strict";r.d(t,{Zo:function(){return c},kt:function(){return f}});var n=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var l=n.createContext({}),u=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},c=function(e){var t=u(e.components);return n.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,s=e.originalType,l=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),m=u(r),f=a,d=m["".concat(l,".").concat(f)]||m[f]||p[f]||s;return r?n.createElement(d,i(i({ref:t},c),{},{components:r})):n.createElement(d,i({ref:t},c))}));function f(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var s=r.length,i=new Array(s);i[0]=m;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:a,i[1]=o;for(var u=2;u<s;u++)i[u]=r[u];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}m.displayName="MDXCreateElement"},2563:function(e,t,r){"use strict";r.r(t),r.d(t,{frontMatter:function(){return i},metadata:function(){return o},toc:function(){return l},default:function(){return c}});var n=r(2122),a=r(9756),s=(r(7294),r(3905)),i={sidebar_label:"custom_arg_parser",title:"utils.config_parser.custom_arg_parser"},o={unversionedId:"reference/utils/config_parser/custom_arg_parser",id:"reference/utils/config_parser/custom_arg_parser",isDocsHomePage:!1,title:"utils.config_parser.custom_arg_parser",description:"Custom Arguments Parser",source:"@site/docs/reference/utils/config_parser/custom_arg_parser.md",sourceDirName:"reference/utils/config_parser",slug:"/reference/utils/config_parser/custom_arg_parser",permalink:"/PyMarlin/docs/reference/utils/config_parser/custom_arg_parser",editUrl:"https://github.com/microsoft/PyMarlin/edit/master/website/docs/reference/utils/config_parser/custom_arg_parser.md",version:"current",sidebar_label:"custom_arg_parser",frontMatter:{sidebar_label:"custom_arg_parser",title:"utils.config_parser.custom_arg_parser"},sidebar:"referenceSideBar",previous:{title:"utils.checkpointer.checkpoint_utils",permalink:"/PyMarlin/docs/reference/utils/checkpointer/checkpoint_utils"},next:{title:"utils.logger.logging_utils",permalink:"/PyMarlin/docs/reference/utils/logger/logging_utils"}},l=[{value:"CustomArgParser Objects",id:"customargparser-objects",children:[]}],u={toc:l};function c(e){var t=e.components,r=(0,a.Z)(e,["components"]);return(0,s.kt)("wrapper",(0,n.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("p",null,"Custom Arguments Parser"),(0,s.kt)("h2",{id:"customargparser-objects"},"CustomArgParser Objects"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-python"},"class CustomArgParser()\n")),(0,s.kt)("p",null,"This class is part of utils and is provided to load arguments from the provided YAML config file.\nFurther, the default values of arguments from config file can be overridden via commandline or via\nthe special argument --params provided for easy AML experimentation. The class instance takes in the\nparser object and optional log_level. This class needs to be instantiated in the main method inside\nthe Marlin_Scenario code."),(0,s.kt)("p",null,"Example for instantiation::"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"parser = CustomArgParser()\nconfig = parser.parse()\n")),(0,s.kt)("p",null,"The command line arguments to override default YAML config values are passed by adding a ","'",".","'"," between\nnamespace and the specific argument as shown in example below. If no namespace is present, then just\npass the argument name. All command line arguments are optional and need to be prefixed with ","'","--","'",".\nAll commandline arguments not present in YAML config file will be ignored with a warning message.\nExample commandline override::"),(0,s.kt)("p",null,"python train.py --tmgr.epochs 4 --chkp.save_dir ",'"',"tmp","\\","checkpoints",'"'),(0,s.kt)("p",null,"NOTE:\nSupported types for CustomArgParser are int, float, str, lists. null is inferred implicitly as str.\nIf you intend to use other types, then please set a dummy default value in YAML file and pass the\nintended value from commandline. Suggested defaults::"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"str: null\nint: -1\nfloat: -1.0\nbool: pick either True or False\nlist[int]: [-1, -1, -1]\nlist[float] : [-1.0, -1.0, -1.0]\n")),(0,s.kt)("p",null,"To make it easy to use with AML pipelines, the parser treats --params as a special argument. The parser\ntreats this as a str format of JSON serialized dictionary and parses this single argument to override\nthe default values from YAML config file of all the arguments present in the dictionary. For example when\nuser provides this str for --param::"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"&#x27;{&quot;--test.test_str&quot;:&quot;this is a new test string 2&quot;,&quot;--test.test_false&quot;:&quot;false&quot;}&#x27;\nNOTE use of single quote and double quotes and use the same format to avoid parsing errors.\n")),(0,s.kt)("p",null,"The parser parses this and overrides the default values provided for test_str and test_false under test\nsection in the YAML config file."),(0,s.kt)("h4",{id:"parse"},"parse"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-python"},"def parse() -> Dict\n")),(0,s.kt)("p",null,"Parse YAML config file, parse commandline arguments and merge the two\nto get the final merged config dictionary."),(0,s.kt)("p",null,"Find and return the path of the file with greatest number of\ncompleted epochs under dirpath (recursive search) for a given file\nprefix, and optionally file extension."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Arguments"),":"),(0,s.kt)("p",null,"  self"),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Returns"),":"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"self._config")," ",(0,s.kt)("em",{parentName:"li"},"Dict")," - merged config dictionary containing all arguments.")))}c.isMDXComponent=!0}}]);